# ブックマーク機能 設計書

## 概要

ブックマーク機能は、ユーザーが気になるセッションをお気に入り登録し、タイムテーブルや専用画面で素早くアクセスできるようにする機能です。

---

## 画面・UI構成
- タイムテーブルやセッション詳細画面のブックマークボタン
- ブックマーク済みセッション一覧画面
- ブックマーク状態の強調表示

---

## 主なクラス・責務
- `BookmarkManager`：ブックマーク状態の管理・永続化
- `BookmarkViewModel`：ブックマーク一覧画面の状態管理
- `Session`：セッションデータモデル

---

## 振る舞い・ユースケース詳細

### 1. ブックマーク登録・解除
- 各セッションカードや詳細画面のブックマークボタンをタップで状態をトグル
- BookmarkManagerがローカルDBやサーバーに状態を保存
- 状態は即時UIに反映

### 2. ブックマーク一覧表示
- BookmarkViewModelがBookmarkManager経由でブックマーク済みセッション一覧を取得
- タイムテーブルや専用画面で一覧表示

### 3. 状態同期
- ログインユーザーの場合、サーバーと同期し複数端末で一貫性を保つ
- オフライン時はローカルDBに保存し、オンライン時に同期

---

## データフロー
1. ユーザー操作でBookmarkManagerが状態を更新
2. ViewModelが状態を監視し、UIに反映
3. 必要に応じてサーバーと同期

---

## 使用技術・ライブラリ
- Kotlin Flow/StateFlow
- Room
- Retrofit/OkHttp
- Hilt

---

## テスト方針
- ユニットテスト（BookmarkManager、ViewModel）
- UIテスト（ブックマーク操作、一覧表示）

---

## 備考
- 詳細は[公式リポジトリ](https://github.com/DroidKaigi/conference-app-2023)参照
